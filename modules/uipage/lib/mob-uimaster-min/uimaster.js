var MobileAppMode=(typeof(_mobContext)!=undefined&&typeof(_mobContext)!="undefined");if(MobileAppMode){var AJAX_SERVICE_URL="";var LANG="zh-CN";var USER_CONSTRAINT_IMG="/images/uimaster_constraint.gif";var USER_CONSTRAINT_LEFT=false;var CURTIME="";var TZOFFSET="";$(document).bind("mobileinit",function(){$.mobile.page.prototype.options.keepNative="select,input.foo"})}var CONSTRAINT_BACKGROUNDCOLOR=typeof(UIMaster_CONSTRAINT_BACKGROUND_COLOR)=="undefined"?"#C4E1FF":UIMaster_CONSTRAINT_BACKGROUND_COLOR;var CONSTRAINT_BGCOLOR="#E7F3FF";var CONSTRAINT_STYLE_SUFFIX="_constraint";var CONSTRAINT_BACKGROUND_IMAGE=typeof(UIMaster_CONSTRAINT_BACKGROUND_IMAGE)=="undefined"?"/images/widget_required_highlight.gif":UIMaster_CONSTRAINT_BACKGROUND_IMAGE;var READONLY_BACKGROUND_IMAGE="/images/widget_readonly.gif";var userAgent=navigator.userAgent.toLowerCase(),D="defaultname.",C="Common";function setListener(b,a){if(b!=null){if(b.length!=null&&b.type==null){for(var c=0,d=b.length;c<d;c++){setSingleListener(b[c],a)}}else{setSingleListener(b,a)}}}function setSingleListener(c,b){if(c==undefined){return}if(c.type=="select-one"){if(c.onchange!=null&&c.onchange!=undefined){var a=c.onchange;c.onchange=function(){a();b()}}else{c.onchange=b}}else{if(c.onclick!=null&&c.onclick!=undefined){var a=c.onclick;c.onclick=function(){a();b()}}else{c.onclick=b}}}function Expression(components,expression){var newExp=expression;for(var i=0;i<components.length;i++){var component=components[i];if(component.type=="text"|component.type=="password"){newExp=newExp.replace("{"+(i+1)+"}",component.value)}else{if(component.type=="checkbox"){if(component.checked==true){newExp=newExp.replace("{"+(i+1)+"}","true")}else{newExp=newExp.replace("{"+(i+1)+"}","false")}}else{newExp=newExp.replace("{"+(i+1)+"}",component.value)}}}return eval(newExp)}function dPageLink(b,c){if(b!=null){parent.defaultname.functionTree.clickUiPanel=c;var a=parent.defaultname.functionTree._treeObj;a.deselect_node(a.get_selected());a.select_node(b)}}function dPageLinkOnPage(c){if(!c||c=="null"||c==""){return}if(c.indexOf(",")!=-1){var b=c.split(",");for(var a=0;a<b.length;a++){$("#"+b[a]).trigger("click")}}else{$("#"+c).trigger("click")}}function setRequiredStyle(c){if(!document.getElementById(c+"div")){var a=document.getElementById(c+"_widgetLabel"),b=$('<span><img src="'+RESOURCE_CONTEXTPATH+USER_CONSTRAINT_IMG+'"</span>').attr("id",c+"div").css("verticalAlign","top");a?(USER_CONSTRAINT_LEFT?$(a).prepend(b):$(a).append(b)):(a=document.getElementById(c)||document.getElementsByName(c)[0],USER_CONSTRAINT_LEFT?$(a).before(b):$(a).after(b))}}function setConstraintStyle(b){var c=b.className;if(c.lastIndexOf(CONSTRAINT_STYLE_SUFFIX)!=-1||b.style.backgroundImage=="url("+RESOURCE_CONTEXTPATH+CONSTRAINT_BACKGROUND_IMAGE+")"){return}if($.trim(c)!=""){b.className+=" "+c+CONSTRAINT_STYLE_SUFFIX;var a=(UIMaster.browser.msie?b.currentStyle.backgroundImage=="none":document.defaultView.getComputedStyle(b,null).getPropertyValue("background-image")=="none");if(a){b.className=c;b.style.backgroundImage="url("+RESOURCE_CONTEXTPATH+CONSTRAINT_BACKGROUND_IMAGE+")"}}else{b.style.backgroundImage="url("+RESOURCE_CONTEXTPATH+CONSTRAINT_BACKGROUND_IMAGE+")"}}function constraint(h,c){c=c||UIMaster.i18nmsg(C+"||VERIFY_FAIL");var d=document.getElementById(h)||document.getElementsByName(h)[0],e;if((d&&d.parentDiv)||(d&&!d.parentDiv&&d.parentNode.nodeName=="P")){e=$(d.parentDiv!=null?d.parentDiv:d.parentNode.parentNode);e.children(".err-field-warn, #_pholder").remove();var a=(e.width()>0)?e.width():175;var g=c.split(" * "),f=$("<span style=color:red; >"+(g.length>1?UIMaster.i18nmsg(C+"||MULT_ERRORS"):g[0])+"</span>"),b=$('<div class="err-field-warn clearfix"></div>');if(e.attr("nodeName")=="TD"){b.addClass("err-field-warn-table")}e.append('<div id="_pholder"></div>').append(b.attr("title",g.join("\n")).width(a).append(f.width(a-18)).append('<span class="err-icon err-icon-warn"></span>'));UIMaster.browser.mozilla&&f.textOverflow("...")}}function clearConstraint(e){var c=document.getElementById(e)||document.getElementsByName(e)[0];if(c){var b=c.className;var d=b.lastIndexOf(CONSTRAINT_STYLE_SUFFIX);var a=b.substring(0,d).lastIndexOf(" ");if(d!=-1){c.className=b.substring(a,d)+" "+b.substring(d+CONSTRAINT_STYLE_SUFFIX.length+1)}else{if((c.style.backgroundImage).replace(/"/g,"")=="url("+RESOURCE_CONTEXTPATH+CONSTRAINT_BACKGROUND_IMAGE+")"){c.style.backgroundImage=c.defaultBackgroundImage?c.defaultBackgroundImage:"none"}}if(c.oldInvalidF==true){c.oldInvalidF=false}if((c.parentDiv)||(!c.parentDiv&&c.parentNode.nodeName=="P")){$(c.parentDiv!=null?c.parentDiv:c.parentNode.parentNode).children(".err-field-warn").remove()}}}function validateAll(f){var b=UIMaster.getObject(f);for(var c=0;c<b.validationList.length;c++){var g=b.validationList[c][0];g.currentComp=b;var e=b.validationList[c][1];var d=g.components;if(d==undefined){if(!e.call(g)){return false}clearConstraint(b.name)}else{for(var a=0,h=d.length;a<h;a++){if(!e.call(g)){return false}clearConstraint(d[a].name)}}}return true}Array.prototype.remove=function(a){if(isNaN(a)||a>this.length){return false}for(var b=0,c=0;b<this.length;b++){if(this[b]!=this[a]){this[c++]=this[b]}}this.length-=1};function isArrayEquals(d,c){if(d==c){return true}if(typeof(d)!=typeof(c)){return false}if(typeof(d)=="function"){return d.toString()==c.toString()}if(typeof(d)=="object"){if(d.constructor==Array&&c.constructor==Array){if(d.length==c.length){for(var e=0;e<d.length;e++){if(!isArrayEquals(d[e],c[e])){return false}}return true}return false}if(d.constructor!=Array&&c.constructor!=Array){if(typeof(d)=="object"&&typeof(c)=="object"){return d.equals(c)}else{if(typeof(d)!="object"&&typeof(c)!="object"){return d==c}}return false}}return false}function registerConstraint(a){try{a.defaultBackgroundImage=a.defaultBackgroundImage||(UIMaster.browser.msie?a.currentStyle.backgroundImage:document.defaultView.getComputedStyle(a,null).getPropertyValue("background-image"))}catch(b){}try{a.removeListener("mouseout",validateAll,false);a.addListener("mouseout",validateAll,false);a.removeListener("blur",validateAll,false);a.addListener("blur",validateAll,false)}catch(b){}}function getInputUI(uientity){for(var el in uientity){if(el=="parentEntity"||el=="Form"||el=="name"||el=="validators"){continue}var e=eval("uientity."+el);if(e==undefined||(e.style!=undefined&&e.style.display=="none")||typeof(e)!="object"){continue}if(e.tagName==undefined){var e2=getInputUI(e);if(e2!=null){return e2}}if(e.type=="text"||e.type=="password"||e.type=="checkbox"||e.type=="radio"||e.type=="textArea"||e.type=="select-one"||e.type=="select-multiple"){return e}}return null}function getUIValue(a){if(a.type=="checkbox"||a.type=="radio"||a.type=="select-multiple"){}else{return a.type!=undefined?a.value:null}}function setUIValue(a,b){if(a.type=="checkbox"||a.type=="radio"||a.type=="select-multiple"){}else{(a.type!=undefined)&&(a.value=b)}}function addEvent(c,b,a){if(c.addEventListener){c.addEventListener(b,a,false)}else{if(c.attachEvent){c.attachEvent("on"+b,a)}}}function removeEvent(c,b,a){if(c.removeEventListener){c.removeEventListener(b,a,false)}else{if(c.detachEvent){c.detachEvent("on"+b,a)}}}function retrieveFormValue(){var e=[],d="",a;if(arguments.length==1){d=$("#"+arguments[0]).attr("action");e._frameId=arguments[0]}else{if(arguments.length==0){d=$("form").eq(0).attr("action");e._frameId=""}}e._actionUrl=d;a=(d.substring(d.indexOf("?")+1)).split("&");for(var b=0;b<a.length;b++){var c=a[b].split("=");e[c[0]]=c[1]}return e}function containXSS(b){var a=/(<\s*script\s*>)|(javascript:)|(eval\()|(&#\d+)|(&amp;)/i;return a.test(b)}function accAdd(f,d){var c,b,a;try{c=f.toString().split(".")[1].length}catch(g){c=0}try{b=d.toString().split(".")[1].length}catch(g){b=0}a=Math.pow(10,Math.max(c,b));return Math.round(f*a+d*a)/a}function accSub(b,a){return accAdd(b,-a)}function accMul(d,b){var a=0,f=d.toString(),c=b.toString();try{a+=f.split(".")[1].length}catch(g){}try{a+=c.split(".")[1].length}catch(g){}return Number(f.replace(".",""))*Number(c.replace(".",""))/Math.pow(10,a)}function accDiv(d,c){var g=0,f=0,b,a;try{g=d.toString().split(".")[1].length}catch(h){}try{f=c.toString().split(".")[1].length}catch(h){}b=Number(d.toString().replace(".",""));a=Number(c.toString().replace(".",""));return accMul((b/a),Math.pow(10,f-g))}function sideBar(c,e,g){var f=$("#"+c).children();if(f.length<2){if(elementList[c]){f=$(elementList[c]).children()}if(f.length<2){alert("Side bar requires two panels defined.");return}}var b=function(r){var h=$(elementList[r]);var k=$(elementList[g]);var l=$(elementList[e]);var q=$(f[0]);var t=$(f[1]);var j=h.width()-q.width()-18;if(j>0){t.css("width",j)}var o=h.parents("html:first");var s=$(o).height();var i=$(window).height()-s-20;if(i<0){i=$(window).height()-k.height()-80}var n=k.height()+i;if(n>parseInt(k.css("min-height"))){l.css("height",n);k.css("height",n)}var m=q.find("iframe");m.each(function(){$(this).css({height:(q.height()-60)+"px"})});var m=t.find("iframe");m.each(function(){$(this).css({height:(t.height()-60)+"px"})})};b(c);var d=function(h){return function(){b(h)}};setTimeout(d(c),500);var a=$("#"+c).parent().css("min-height");$("#"+e).css("min-height",a);$("#"+g).css("min-height",a)}function parseNumber(i){var c,k,m,a,e,n,f,d,l,j="([-|+]?)([0-9,]*)([.]?)([0-9,]*)(([e|E])([-|+]?)(([0]*)([1-9]?[0-9]*)))?",h=new RegExp(j);f=h.exec(i);if(f==null){return null}if(f[0].length!=i.length){return null}c=f[2];k=f[4];e=f[6];a=f[8];m=f[10];if(f[1]=="-"){d=0}else{d=1}if(f[7]=="-"){l=0}else{l=1}c=c.replace(/,/g,"");var g=new RegExp("([0]*)([0-9]*)"),b=g.exec(c);if(b[1].length==0&&b[2].length==0){return null}else{if(b[2].length==0){c=0}else{c=parseInt(b[2])}}k=f[4].replace(/,/g,"");if(e==null){m=0}else{if(e.length==0){m=0}else{if(a.length==m.length&&m.length==0){return null}else{if(m.length==0){m=0}}}}n=""+c+"."+k;n=parseFloat(n);if(isNaN(n)){return null}if(l==0){m*=-1}n=accMul(n,Math.pow(10,m));if(d==0){n*=-1}return n}(function(){var UIMaster={emptyFn:function(){},funclist:[],csslist:[],framelist:[],handler:[],syncList:[],initList:[],util:{}};if(window.UIMaster==undefined){window.UIMaster=UIMaster;window.ajax_execute_onerror=false}else{return}undefined;UIMaster.browser={version:(userAgent.match(/.*?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)};UIMaster.init=function(){UIMaster.getAllScript();$('input[name="__resourcebundle"]').each(function(){UIMaster.i18nmsg.put($(this).val(),g(this,"msg"))})};UIMaster.require=function(_jsName,_nocheck){_jsName=(_jsName.indexOf("/")==0?"":"/")+_jsName;if(_jsName.indexOf(WEB_CONTEXTPATH)==-1&&_jsName.search(RESOURCE_CONTEXTPATH)!=0){_jsName=RESOURCE_CONTEXTPATH+_jsName}if(MobileAppMode){_mobContext.addResource(_jsName)}else{if(!UIMaster.funclist[_jsName]){var head=document.getElementsByTagName("head")[0]||document.documentElement,script=document.createElement("script"),data=new bmiasia_UIMaster_appbase_AjaxClient(_jsName+(_nocheck?"":("?_timestamp="+new Date().getTime()))).submitAsString();script.type="text/javascript";UIMaster.browser.msie?(script.text=data):script.appendChild(document.createTextNode(data));head.insertBefore(script,head.firstChild);head.removeChild(script);UIMaster.funclist[_jsName]="finished"}}};UIMaster.getAllScript=function(){var scripts=document.getElementsByTagName("script"),pattern=/^https?\:\/\/[^\/]*([\/\S*]*)$/;for(var i=0;i<scripts.length;i++){scripts[i].src&&(UIMaster.funclist[scripts[i].src]="finished")}return UIMaster};UIMaster.addResource=function(pageName){};UIMaster.El=function(id){return new UIMaster.El.fn.init(id)};UIMaster.El.fn={jqObj:null,init:function(id){if(typeof id=="string"){this.jqObj=$(document.getElementById(id)||document.getElementsByName(id))}else{if(id&&id.nodeType){this.jqObj=jQuery(id)}}},getParent:function(){var p=new UIMaster.El();p.jqObj=this.jqObj.parent();return p},get:function(i){return i?this.jqObj.get(i):this.jqObj.get(0)},getChildren:function(){var p=new UIMaster.El();p.jqObj=this.jqObj.children();return p},getArray:function(){return this.jqObj.get()},getPosition:function(){var obj=this.jqObj.offset();obj.top=obj.top-$(document).scrollTop();obj.left=obj.left-$(document).scrollLeft();obj.width=this.jqObj.width();obj.height=this.jqObj.height();return obj},addListener:function(t,fn){this.jqObj.bind(t,fn)},removeListener:function(t,fn){this.jqObj.unbind(t,fn)},trigger:function(t){this.jqObj.trigger(t)},setAttr:function(k,v){this.jqObj.attr(k,v)},removeAttr:function(k){this.jqObj.removeAttr(k)},getAttr:function(k){return this.jqObj.attr(k)},after:function(v){var p=new UIMaster.El();p.jqObj=this.jqObj.after(v);return p},before:function(v){var p=new UIMaster.El();p.jqObj=this.jqObj.before(v);return p},remove:function(){this.jqObj.remove()},append:function(v){var p=new UIMaster.El();p.jqObj=this.jqObj.append(v);return p},prepend:function(v){var p=new UIMaster.El();p.jqObj=this.jqObj.prepend(v);return p},update:function(v){var p=new UIMaster.El();p.jqObj=this.jqObj.replaceWith(v);return p}};UIMaster.El.fn.init.prototype=UIMaster.El.fn;UIMaster.apply=function(o,c,v){if(o&&c&&typeof c=="object"){for(var m in c){if(v){(o[m]==undefined||typeof o[m]=="function")&&(o[m]=c[m])}else{o[m]=c[m]}}}};UIMaster.groupAssign=function(obj,nv){for(var i=0;i<nv.length;i++){for(var n=0;n<nv[i][0].length;n++){obj[nv[i][0][n]]=nv[i][1]}}};UIMaster.i18nmsg=UIMaster_getI18NInfo;UIMaster.synAttr=function(uiid,name,value){$.ajax({url:AJAX_SERVICE_URL,asnyc:false,data:{_ajaxUserEvent:false,_uiid:uiid,_valueName:name,_value:value,_framePrefix:UIMaster.getFramePrefix()}})};UIMaster.extend=function(sp,c){var sb=function(conf){return sp.apply(this,arguments)},F=function(){};F.prototype=sp.prototype;sb.prototype=new F();sb.prototype.constructor=sb;sb.superclass=sp.prototype;UIMaster.apply(sb.prototype,c);return sb};UIMaster.getName=function(obj){var name=(typeof obj.name=="string")?obj.name:obj.id;if(name){var n=name.split("."),i=n[n.length-1]=="Form"?2:1;return n[n.length-i]}return null};UIMaster.getObject=function(event){event=event||window.event;if(!event){return}if(!(event.srcElement||event.target)){return event}if(event.type=="mouseover"||event.type=="mouseout"){return event.fromElement?event.fromElement:event.target}else{return event.srcElement?event.srcElement:event.target}};UIMaster.arrayContain=function(tgtArray,srcArray){if(tgtArray instanceof Array&&srcArray instanceof Array){var str=srcArray.join(),i;if(str==tgtArray.join()){return true}for(i=0;i<tgtArray.length;i++){if(str.indexOf(tgtArray[i])==-1||tgtArray[i]==""){return false}}return true}return false};UIMaster.util.isLeftToRight=function(){var ltr=document.getElementById("isLeftToRight");if(ltr){return(ltr.value=="true"?true:false)}return true};UIMaster.util.retrieveErrMsg=function(constraint){var msg=[];var recursive=function(o){if(typeof o[o.length-1]=="string"){msg[msg.length]=o.join(". ")}else{for(var i=0;i<o.length;i++){if((i==0)&&(typeof o[0]=="string")){continue}recursive(o[i])}}};if(constraint instanceof Array){recursive(constraint)}else{msg[0]=constraint}return msg};UIMaster.util.forwardToPage=function(link){window.top.location.href=link};UIMaster.registerHandler=function(name,handler){UIMaster.handler[name]=handler;return UIMaster};UIMaster.registerHandler("fadeOut",function(data,win){UIMaster.El(data.uiid).jqObj.fadeOut((data.speed&&typeof data.speed=="number")?data.speed:5000)}).registerHandler("pageReSubmit",function(data,win){UIMaster.ui.mask.close();var sync=$('<input type="hidden" />').attr({id:"_sync",value:data.data});var _form=(data.parent=="null"||data.parent=="")?$("form:first"):$("form[_frameprefix='"+data.parent+"']");_form.prepend(sync).submit()}).registerHandler("permitSubmit",function(data,win){UIMaster.ui.mask.close();var _form=$("form:first"),_target=((!data.parent||data.parent=="null")?"_self":data.parent);var act=_form.attr("action")+"&_htmlkey="+data.data;_form.attr("target",_target).attr("action",act).submit()}).registerHandler("appendError",function(data,win){UIMaster.ui.mask.close();UIMaster.clearErrMsg();if(data instanceof Object){var box,bw,m,t,le,p;m=$('<div class="err-page-warn clearfix"></div>'),tip=$("<div></div>");(data.image)?tip.append('<div style="float: left;"><img src="'+RESOURCE_CONTEXTPATH+'/images/Error.png" /></div>'):tip.append('<div class="err-icon" style="float: left;"></div>');if(data.errorMsgTitle){tip.append('<div class="err-title">'+data.errorMsgTitle+"</div>")}if(data.errorMsgBody){tip.append('<div class="err-body">'+data.errorMsgBody+"</div>")}t=$("#"+data.uiid);if(t.length==0){t=$("[name='"+data.uiid+"']")}le=data.uiid.lastIndexOf(".");if(le==-1){p=$("#Form")}else{p=$("#"+data.uiid.substring(0,le+1).replace(".","\\.")+"Form")}p.prepend(m.append(tip));if(data.exceptionTrace){tip.append($('<span id="showTraceImg" style="float:right;cursor:pointer;" class="ui-button-icon-primary ui-icon ui-icon-arrow-1-s" alt="Show trace"></span>').bind("click",function(){var t=$(this);if(t.hasClass("ui-icon-arrowthick-1-n")){t.removeClass("ui-icon-arrowthick-1-n");t.addClass("ui-icon-arrowthick-1-s")}else{t.addClass("ui-icon-arrowthick-1-n");t.removeClass("ui-icon-arrowthick-1-s")}$("textarea[id=traceArea]").toggle()}));m.append('<textarea id="traceArea" style="display:none;clear:both;width:98%;" rows="20">'+data.exceptionTrace+"</textarea>")}if(data.uiid){constraint(data.uiid,data.errorMsgTitle)}}}).registerHandler("append",function(data,win){if(data.data){var n=$(win.eval(D+data.parent)).children(),k=data.parent.split(".");if(win.eval(D+data.parent)){win.getElementListSingle($(n.get(n.length-1)).before(data.data).get(0).previousSibling);win.eval(data.js);k[k.length-1]="Form";win.eval(D+k.join(".")+".parentEntity").addComponent(win.eval(D+data.uiid),true)}}else{var n=$(win.eval(D+data.parent)).children();$(n.get(n.length-1)).before(win.eval(D+data.uiid).parentDiv)}}).registerHandler("prepend",function(data,win){if(data.data){if(win.eval(D+data.parent)){win.getElementListSingle(win.eval("UIMaster.El(defaultname."+data.parent+")").prepend(data.data).get(0));win.eval(data.js);var k=data.parent.split(".");k[k.length-1]="Form";win.eval(D+k.join(".")+".parentEntity").addComponent(win.eval(D+data.uiid),true)}}else{$(win.eval(D+data.parent)).prepend(win.eval(D+data.uiid).parentDiv)}}).registerHandler("before",function(data,win){if(data.data){if(win.eval(D+data.sibling+".parentDiv")){win.getElementListSingle(win.eval("UIMaster.El(defaultname."+data.sibling+".parentDiv)").before(data.data).get(0).previousSibling);win.eval(data.js);win.eval(D+data.sibling+".parentEntity").addComponent(win.eval(D+data.uiid),true)}}else{$(win.eval(D+data.sibling+".parentDiv")).before(win.eval(D+data.uiid+".parentDiv"))}}).registerHandler("after",function(data,win){if(data.data){if(win.eval(D+data.sibling+".parentDiv")){win.getElementListSingle(win.eval("UIMaster.El(defaultname."+data.sibling+".parentDiv)").after(data.data).get(0).nextSibling);win.eval(data.js);win.eval(D+data.sibling+".parentEntity").addComponent(win.eval(D+data.uiid),true)}}else{$(win.eval(D+data.sibling+".parentDiv")).after(win.eval(D+data.uiid+".parentDiv"))}}).registerHandler("remove",function(data,win){var node=win.eval(D+data.uiid),i;for(i in win.elementList){if(i.indexOf(data.uiid)==0&&(i==data.uiid||i.indexOf(data.uiid+".")==0)){delete win.elementList[i]}}if(node){node.parentEntity.removeComponent(node);win.UIMaster.El(node.parentDiv).remove();node.parentDiv=node.parentEntity=null;delete node}}).registerHandler("openwindow",function(data,win){var config=win.eval("("+data.sibling+")");win.UIMaster.apply(config,{js:data.js,data:data.data,uiid:data.uiid,parent:data.parent,frameInfo:data.frameInfo});new win.UIMaster.ui.window(config).open()}).registerHandler("closewindow",function(data,win){win.UIMaster.ui.window.getWindow(data.uiid).close()}).registerHandler("opendialog",function(data,win){new win.UIMaster.ui.dialog(eval("("+data.data+")")).open()}).registerHandler("update_attr",function(data,win){var e,i;for(i in win.elementList){if(i.indexOf(data.uiid)==0){e=win.elementList[i]}}if(!e){return}var attribute=win.eval("("+data.data+")");e.addAttr(attribute)}).registerHandler("remove_attr",function(data,win){var e,i;for(i in win.elementList){if(i.indexOf(data.uiid)==0){e=win.elementList[i]}}if(!e){return}if(data.name==undefined){e.removeAttr(data.data)}else{e.removeAttr(data.name)}}).registerHandler("update_event",function(data,win){var e,i;for(i in win.elementList){if(i.indexOf(data.uiid)==0){e=win.elementList[i]}}if(!e){return}var attribute=win.eval("("+data.data+")");e.bind(attribute.name,attribute.value)}).registerHandler("remove_event",function(data,win){var e,i;for(i in win.elementList){if(i.indexOf(data.uiid)==0){e=win.elementList[i]}}if(!e){return}e.unbind(data.name)}).registerHandler("update_style",function(data,win){var e,i;for(i in win.elementList){if(i.indexOf(data.uiid)==0){e=win.elementList[i]}}if(!e){return}var attribute=win.eval("("+data.data+")");$(e).css(attribute.name,attribute.value)}).registerHandler("remove_style",function(data,win){var e,i;for(i in win.elementList){if(i.indexOf(data.uiid)==0){e=win.elementList[i]}}if(!e){return}$(e).css(data.name,"none")}).registerHandler("update_const",function(data,win){if(data.readonly=="true"){return}var attribute=win.eval("("+data.data+")");win.$("#"+data.uiid).validator=attribute.validator;win.$("#"+data.uiid).validators=attribute.validators}).registerHandler("remove_const",function(data,win){if(data.readonly=="true"){return}var attribute=win.eval("("+data.data+")");win.$("#"+data.uiid).validators=attribute.validators}).registerHandler("update_readonly",function(data,win){var attribute=win.eval("("+data.data+")");UIMaster.handler.remove(data,win);UIMaster.handler.append(data,win)}).registerHandler("hardreturn",function(data,win){win.$("#"+data.uiid).append(data.data)}).registerHandler("javaobject",function(data,win){return data.data}).registerHandler("sessiontimeout",function(data){location.replace(location.protocol+"//"+location.host+WEB_CONTEXTPATH+data.data)}).registerHandler("js",function(data,win){win.eval(data.js)}).registerHandler("updateSingle",function(data,win){}).registerHandler("table_update",function(data,win){var tdata=win.eval("("+data.data+")"),id=data.uiid,uitable,i;for(i in win.elementList){if(i.indexOf(id)==0){uitable=win.elementList[i]}}if(!uitable){return}uitable.refreshFromServer(tdata)}).registerHandler("tabPaneHandler",function(data,win){var tabdata=win.eval("("+data.data+")"),id=data.uiid,uitab,i;for(i in win.elementList){if(i.indexOf(id)==0){uitab=win.elementList[i]}}if(!uitab){return}switch(tabdata.cmd){case"addTab":uitab.addTab(tabdata.entity,tabdata.title,tabdata.index);break;case"removeTab":uitab.removeTab(tabdata.index);break;case"setBody":uitab.setTabAt(tabdata.entity,tabdata.index);break;case"setTitle":uitab.setTitleAt(tabdata.title,tabdata.index);break;case"setSelectedIndex":uitab.setSelectedTab(tabdata.index);break}win.eval(data.js)}).registerHandler("tab_append",function(data,win){var id=data.parent,uitab,i;for(i in win.elementList){if(i.indexOf(id)==0){uitab=win.elementList[i]}}if(!uitab){return}var c=uitab.addTabByLazyLoading(data.data,data.uiid);c!=null?win.getElementListSingle(c):"";win.eval(data.js)}).registerHandler("uiflowhandler",function(data,win){var flowdata=win.eval("("+data.data+")"),id=data.uiid,uiflow,i;for(i in win.elementList){if(i.indexOf(id)==0){uiflow=win.elementList[i]}}if(!uiflow){return}switch(flowdata.cmd){case"refreshModel":uiflow.refreshModel(win.eval("("+flowdata.data+")"));break;case"addNode":uiflow.addNode(win.eval("("+flowdata.data+")"));break;case"removeNode":uiflow.removeNode(flowdata.nodeId);break;case"saveSuccess":uiflow.saveSuccessHint();break;case"saveFailure":uiflow.saveFailureHint();break}}).registerHandler("tree_refresh",function(data,win){var children=win.eval("("+data.data+")"),id=data.uiid,tree,i;for(i in win.elementList){if(i.indexOf(id)==0){tree=win.elementList[i]}}if(!tree){return}tree.refresh(children)}).registerHandler("gallery_refresh",function(data,win){var children=data.data,id=data.uiid,image,i;for(i in win.elementList){if(i.indexOf(id)==0){image=win.elementList[i]}}if(!image){return}image.refresh(children)});UIMaster.cmdHandler=function(json,status,result){function getW(f){var fs,w,i;w=FRAMEWRAP!="${FRAME_WRAP}"?(function(f){var s=f.split("."),w=window.top,i;for(i=0;i<s.length;i++){w=w.frames[s[i]]}return(w&&w.window)?w:window})(FRAMEWRAP):window.top;if(f==""){return w}if(!f){return window}fs=f.split(".");for(i=0;i<fs.length;i++){try{w.name}catch(e){return window}w=w.frames[fs[i]]}return(w&&w.window)?w:window}var cmds,win,i;if(MobileAppMode){cmds=eval("("+json+")")}else{cmds=json}for(i=0;i<cmds.length;i++){win=getW(cmds[i].frameInfo);if(win.UIMaster.handler[cmds[i].jsHandler]){try{win.UIMaster.handler[cmds[i].jsHandler](cmds[i],win)}catch(e){console.log(e)}}}if(!MobileAppMode){if(cmds.length&&(cmds.length<=0||cmds[cmds.length-1].jsHandler!="appendError")&&arguments.callee.caller.toString().indexOf("postInit")==-1){UIMaster.ui.mask.close()}}};UIMaster.appendPanelErr=function(sid,res){var tp,s=UIMaster.El(sid).jqObj;var pid=s.parent(".uimaster_panel").attr("id");tp=document.getElementById(pid+".wrapperPanel");if(tp&&tp.style.display=="none"){tp.style.display="",tp.open="true";document.getElementById(pid+".arrowIcon").src=RESOURCE_CONTEXTPATH+"/images/table-open.gif"}$(".err-field-warn:first").siblings("input[type=text],input[type=checkbox],input[type=radio],textarea,select").eq(0).focus()};UIMaster.clearErrMsg=function(){$(".err-page-warn").remove()};function syncAll(){if(defaultname.sync){defaultname.sync()}else{for(var i in defaultname){defaultname[i].sync&&defaultname[i].sync()}}}UIMaster.triggerServerEvent=function(uiid,actionName,data,entityName,action){UIMaster.ui.mask.open();syncAll();var opt={async:false,url:AJAX_SERVICE_URL,type:"POST",data:{_ajaxUserEvent:action==undefined?true:action,_uiid:uiid,_actionName:actionName,_framePrefix:UIMaster.getFramePrefix(UIMaster.El(uiid).get(0)),_actionPage:entityName,_sync:UIMaster.ui.sync()},beforeSend:function(){},success:UIMaster.cmdHandler};var opt2={};if(typeof data.asyncAttr!="undefined"){opt2.async=data.asyncAttr}if(typeof data.completeHandler!="undefined"){opt2.complete=data.completeHandler}if(MobileAppMode){_mobContext.ajax(JSON.stringify(opt))}else{$.ajax(jQuery.extend({},opt,opt2))}};UIMaster.trigger2PhaseSubmit=function(destUrl,pageName,outName,framePrefix,portlet,target){try{syncAll();var o=new Object();o._pagename=pageName;o._outname=outName;o._framePrefix=framePrefix;o._sync=UIMaster.ui.sync();o._ajaxSubmit="true";if(target!="_self"){if(target=="_parent"){o._frameTarget=window.parent.document.forms[0].getAttribute("_framePrefix")||""}else{o._frameTarget=target}}if(portlet){o._portletId=portlet.value}$.ajax({async:true,type:"POST",url:destUrl,data:o,beforeSend:UIMaster.ui.mask.open(),success:UIMaster.cmdHandler})}catch(e){new UIMaster.ui.dialog({message:'An error happens when invoke \nmethod "trigger2PhaseSubmit"',messageType:0,title:"Javascript Execute Error",error:true,height:150,width:300}).open();UIMaster.ui.mask.close()}};UIMaster.getFrameTarget=function(elm){return frameInternal(elm,"_frameTarget")};UIMaster.getFramePrefix=function(elm){return frameInternal(elm,"_framePrefix")};function frameInternal(elm,name){if(elm&&elm.form){return elm.form.getAttribute(name)}while(elm&&elm.tagName&&elm.tagName.toLowerCase()!="form"&&elm.getAttribute(name)==null){elm=elm.parentNode}if(!elm||elm==document||!elm.getAttribute(name)){return document.forms[0].getAttribute(name)}return elm.getAttribute(name)}UIMaster.getUIID=function(widget){if(typeof(widget)=="string"){return widget}return widget.nodeType?(widget.id?widget.id:widget.name):widget[0].name};UIMaster.getValue=function(widget){return widget};UIMaster.parseCurrency=function(locale,format,text){var r;$.ajax({async:false,url:AJAX_SERVICE_URL,data:{serviceName:"CurrencyFormatService",_locale:locale,_format:format,_text:text},success:function(data){r=data}});return Number(r)};UIMaster.formatCurrency=function(locale,format,number){var r;$.ajax({async:false,url:AJAX_SERVICE_URL,data:{serviceName:"CurrencyFormatService",_locale:locale,_format:format,_number:number},success:function(data){r=data}});return r};UIMaster.runEvent=function(obj,evt){if(obj.fireEvent){obj.fireEvent("on"+evt)}else{if(obj.dispatchEvent){var evnt=document.createEvent("HTMLEvents");evnt.initEvent(evt,true,true);obj.dispatchEvent(evnt)}}};UIMaster.apply(Array.prototype,{validate:function(init){var result=[],i;for(i=0;i<this.length;i++){var res=this[i].validate&&this[i].validate(init);if(res!=null){result=result.concat(res)}}return result.length==0?null:result},init:function(){for(var i=0;i<this.length;i++){this[i].parentEntity=this.parentEntity;this[i].arrayIndex=i;(this[i].Form||(this[i].init&&this[i].ui))&&!this[i].initialized&&this[i].init()}},sync:function(){for(var i=0;i<this.length;i++){(this[i].Form||(this[i].sync&&this[i].ui))&&this[i].sync()}}});function g(t,v){return UIMaster.browser.mozilla?t.getAttribute(v):$(t).attr(v)}UIMaster.ajaxDefaultSettings={async:false,type:"POST",url:AJAX_SERVICE_URL,success:UIMaster.cmdHandler};UIMaster.ajaxSend=function(url,data,callback,type){callback=callback||null;var args=jQuery.extend({},UIMaster.ajaxDefaultSettings,{url:url,data:data,success:callback,dataType:type});jQuery.ajax(args)};UIMaster.ajaxReceive=function(url,data,type){var args=jQuery.extend({},UIMaster.ajaxDefaultSettings,{url:url,data:data,success:function(msg){res=msg},dataType:type}),res=null;jQuery.ajax(args);return res};UIMaster.asyncAjax=function(target){if(target){target.asyncAttr=true}return target};UIMaster.ajaxCompleteHandler=function(target,fn){if(target){target.completeHandler=fn}return target}})();var bmiasia_UIMaster_appbase_Util={checkBrowser:function(){return UIMaster.browser.msie?"IE":(UIMaster.browser.opera?"Opera":(UIMaster.browser.mozilla?"Mozilla":"Unknown"))},elmPosition:function(a){return UIMaster.El(a).getPosition()},findParent:function(b,a){while(b&&b.tagName&&b.tagName.toLowerCase()!=a.toLowerCase()){b=b.parentNode}return b},getEventElement:function(a){return UIMaster.getObject(a)}};var UIMaster_dialog_container={CONTEXT_DIV_ID:"UIMaster_dialog_container",isExistContainer:function(a){return document.getElementById(UIMaster_dialog_container.CONTEXT_DIV_ID)&&document.getElementById(a)},getDefaultContainer:function(f,d){function b(h){var g=h.parentNode;if(g!=document){while(g.getAttribute("type")!="frame"){if(g!=document.body){g=g.parentNode}else{break}}}return g}var a=document.getElementById(UIMaster_dialog_container.CONTEXT_DIV_ID);if(a==null){a=document.createElement("DIV");a.setAttribute("id",UIMaster_dialog_container.CONTEXT_DIV_ID);if(d){var c=b(d);if(c==document.body||c==document){document.getElementsByTagName("body")[0].appendChild(a)}else{c.appendChild(a)}}else{document.getElementsByTagName("body")[0].appendChild(a)}}else{if(d){var c=b(d);if(!(c==document.body||c==document)){if(c.childNodes.length>1){a=c.childNodes[1]}else{$(a).remove();a=document.createElement("DIV");a.setAttribute("id",UIMaster_dialog_container.CONTEXT_DIV_ID);c.appendChild(a)}}}}var e=document.getElementById(f);if(e==null){e=document.createElement("DIV");e.childIndex=0;e.setAttribute("id",f);a.appendChild(e)}return e}};function bmiasia_UIMaster_appbase_getDomDocumentPrefix(){if(bmiasia_UIMaster_appbase_getDomDocumentPrefix.prefix){return bmiasia_UIMaster_appbase_getDomDocumentPrefix.prefix}var c=["MSXML2","Microsoft","MSXML","MSXML3"],d,b;for(b=0;b<c.length;b++){try{d=new ActiveXObject(c[b]+".DomDocument");return bmiasia_UIMaster_appbase_getDomDocumentPrefix.prefix=c[b]}catch(a){}}throw new Error("Could not find an installed XML parser")}function bmiasia_UIMaster_appbase_getXmlHttpPrefix(){if(bmiasia_UIMaster_appbase_getXmlHttpPrefix.prefix){return bmiasia_UIMaster_appbase_getXmlHttpPrefix.prefix}var c=["MSXML2","Microsoft","MSXML","MSXML3"],d,b;for(b=0;b<c.length;b++){try{d=new ActiveXObject(c[b]+".XmlHttp");return bmiasia_UIMaster_appbase_getXmlHttpPrefix.prefix=c[b]}catch(a){}}throw new Error("Could not find an installed XMLHttp object")}function bmiasia_UIMaster_appbase_XmlHttp(){}bmiasia_UIMaster_appbase_XmlHttp.create=function(){try{if(window.XMLHttpRequest){var b=new XMLHttpRequest();if(b.readyState==null){b.readyState=1;b.addEventListener("load",function(){b.readyState=4;if(typeof b.onreadystatechange=="function"){b.onreadystatechange()}},false)}return b}if(window.ActiveXObject){return new ActiveXObject(bmiasia_UIMaster_appbase_getXmlHttpPrefix()+".XmlHttp")}}catch(a){}throw new Error("Your browser does not support XmlHttp objects")};function bmiasia_UIMaster_appbase_XmlDocument(){}bmiasia_UIMaster_appbase_XmlDocument.create=function(){try{if(document.implementation&&document.implementation.createDocument){var b=document.implementation.createDocument("","",null);if(b.readyState==null){b.readyState=1;b.addEventListener("load",function(){b.readyState=4;if(typeof b.onreadystatechange=="function"){b.onreadystatechange()}},false)}return b}if(window.ActiveXObject){return new ActiveXObject(bmiasia_UIMaster_appbase_getDomDocumentPrefix()+".DomDocument")}}catch(a){}throw new Error("Your browser does not support XmlDocument objects")};if(window.DOMParser&&window.XMLSerializer&&window.Node&&Node.prototype&&Node.prototype.__defineGetter__){Document.prototype.loadXML=function(b){var c=(new DOMParser()).parseFromString(b,"text/xml");while(this.hasChildNodes()){this.removeChild(this.lastChild)}for(var a=0;a<c.childNodes.length;a++){this.appendChild(this.importNode(c.childNodes[a],true))}};Document.prototype.__defineGetter__("xml",function(){return(new XMLSerializer()).serializeToString(this)})}function bmiasia_UIMaster_appbase_AjaxClient(a,e,b,c,d){this._url=a||"";this._param="";this._method=e||"GET";this._aysn=(b==null)?false:b;this.callBack=c;this.contentType=d||this.CONTENT_TYPE;this._xHttp=bmiasia_UIMaster_appbase_XmlHttp.create()}bmiasia_UIMaster_appbase_AjaxClient.prototype={CONTENT_TYPE:"application/x-www-form-urlencoded",setUrl:function(a){this._url=a},setMethod:function(a){this._method=a},setAysn:function(a){this._aysn=a},callBackObj:function(a){this.callBack=a},setContentType:function(a){this.contentType=a},append:function(a,b){if(a==null){return}b=(b==null||b==undefined)?"":b;this._param+="&"+encodeURIComponent(a)+"="+encodeURIComponent(b);return this},appendAllForms:function(c){var a=false;try{if(typeof(c)==undefined){throw UIMaster_getI18NInfo("Common||FORM_NOTFIND")}var b=["input","select","textarea"];for(var d=0;d<b.length;d++){var g=c.all.tags(b[d]);for(var f=0;f<g.length;f++){if(d==0&&g[f].type=="radio"){if(g[f].checked){this.append(g[f].name,g[f].value)}}else{this.append(g[f].name,g[f].value)}}}a=true}catch(e){alert(e.description)}return a},submit:function(){this.requestData();if(!this._aysn){return this.xmlParse(this._xHttp.responseText)}},submitAsString:function(){this.requestData();if(!this._aysn){return this._xHttp.responseText}},xmlParse:function(c){var b=bmiasia_UIMaster_appbase_XmlDocument.create();b.async=false;b.loadXML(c);if(b.parseError&&b.parseError.errorCode!=0){var a=b.parseError;throw a}else{if(b.documentElement==null){throw"Parse error"}else{return b.documentElement}}},requestData:function(){if(this._xHttp.readyState!=0){bmiasia_UIMaster_appbase_StatusBar.showInfo("Request Waiting...");window.setTimeout("bmiasia_UIMaster_appbase_StatusBar.setStatusShow(false)",2000);return}if(this._aysn){var aysnObjHttp=this._xHttp;var callBackFuc=this.callBack;var xmlParseFuc=this.xmlParse;aysnObjHttp.onreadystatechange=function(){if(aysnObjHttp.readyState==4){if(aysnObjHttp.status==200){if(callBackFuc!=null){var cmds=null;var resultText=aysnObjHttp.responseText;try{cmds=eval("("+resultText+")")}catch(e){}if(cmds&&cmds.length>0&&UIMaster.handler[cmds[0].jsHandler]){UIMaster.cmdHandler(resultText)}else{if(callBackFuc instanceof bmiasia_UIMaster_appbase_CallBack){resultText.indexOf("[ajax_error]")==0?callBackFuc.callExceptionMethod(resultText.substring("[ajax_error]".length,resultText.length)):callBackFuc.isXML?callBackFuc.callMethod(xmlParseFuc(resultText)):callBackFuc.callMethod(resultText)}else{if(typeof(callBackFuc)=="function"){callBackFuc(resultText)}}}}}else{bmiasia_UIMaster_appbase_StatusBar.showInfo("aysnObjHttp.status: "+aysnObjHttp.status+" "+UIMaster_getI18NInfo("Common||AJAX_EXCEPTION_INTERNAL"));window.setTimeout("bmiasia_UIMaster_appbase_StatusBar.setStatusShow(false)",2000)}}}}else{this._xHttp.onreadystatechange=function(){}}if(this._method.toUpperCase()=="POST"){this._xHttp.open("POST",this._url,this._aysn);this._xHttp.setRequestHeader("content-length",this._param.length);this._xHttp.setRequestHeader("content-type",this.contentType);this._xHttp.send(this._param)}else{var data=this._url+(this._url.indexOf("?")>0?"&":"?")+"SIGNATURE=AjaxClient"+this._param;this._xHttp.open("GET",data,this._aysn);this._xHttp.send(null)}}};function bmiasia_UIMaster_appbase_CallBack(d,a,b,c){this.method=d;this.exceptionMethod=a;this.arguments=(b==null)?new Array():b;this.isXML=((c==null)?false:c);this.exceptionMsg=""}bmiasia_UIMaster_appbase_CallBack.prototype={method:null,exceptionMethod:null,arguments:null,isXML:false,isXMLType:function(a){this.isXML=a},setMethod:function(a){this.method=a},setExceptionMethod:function(a){this.exceptionMethod=a},setArgument:function(a){this.arguments=a||[]},getArgument:function(){return this.arguments},callMethod:function(a){if(this.method!=null&&typeof(this.method)=="function"){this.arguments.push(a);this.method.call(this)}},callExceptionMethod:function(a){this.exceptionMsg=a;if(this.exceptionMethod!=null&&typeof(this.exceptionMethod)=="function"){this.exceptionMethod(this)}}};function UIMaster_getI18NInfo(keyInfo,param,languageType){var v=UIMaster_getI18NInfo.get(keyInfo);if(param==undefined&&v){return v}var object=new bmiasia_UIMaster_appbase_AjaxClient(AJAX_SERVICE_URL);object.append("serviceName","I18NService").append("KEYINFO",keyInfo);if(param!=null&&param!=""){if(param.length>0){var str="";for(var i=0;i<param.length;i++){str+=param[i]+"||"}object.append("ARGUMENTS",str)}}languageType&&object.append("LANGUAGE",languageType);var m=object.submitAsString().replace(/^\s+|\s+$/g,"");try{var c=eval("("+m+")");if(c.length==1){UIMaster.cmdHandler(m)}}catch(e){return UIMaster_getI18NInfo.put(keyInfo,m)}}UIMaster_getI18NInfo.cache=[];UIMaster_getI18NInfo.get=function(a){return this.cache[a]};UIMaster_getI18NInfo.put=function(a,b){this.cache[a]=b;return b};function UIMaster_getFormattedDate(e,d,b,c){var a=new bmiasia_UIMaster_appbase_AjaxClient(AJAX_SERVICE_URL);a.append("serviceName","DateFormatService");if(b&&b instanceof Date){a.append("DATE",b.getTime())}return a.append("FORMAT",e).append("DATETYPE",d).append("DATESTRING",c).append("OFFSET",b?b.getTimezoneOffset():new Date().getTimezoneOffset()).submitAsString().replace(/^\s+|\s+$/g,"")}function bmiasia_UIMaster_appbase_setTimezoneOffset(){new bmiasia_UIMaster_appbase_AjaxClient(AJAX_SERVICE_URL).append("serviceName","SetTimezoneOffset").append("OFFSET",new Date().getTimezoneOffset()).submitAsString()}var bmiasia_UIMaster_appbase_StatusBar=new function(){this.statusDiv=null;this.isOff=false;this.init=function(){if(this.statusDiv!==null){return}var a=document.getElementsByTagName("body")[0];$("<div></div>").css({position:"absolute",top:"0",left:"0",cursor:"wait"}).width("100%").height("100%").attr("id","bmiasia_UIMaster_appbase_div_status").append($("<div></div>").css({position:"absolute",top:"50%",left:"40%",cursor:"wait",backgroundColor:"#e4e7ef",margin:"-50px 0 0 -100px",padding:"15px",border:"1px solid #0a246a",color:"#2b2e36",fontSize:"14px",textAlign:"center"}).width(280).attr("id","bmiasia_UIMaster_appbase_div_statustext")).hide().appendTo(a);this.statusDiv=document.getElementById("bmiasia_UIMaster_appbase_div_status");this.statusDiv.statusText=document.getElementById("bmiasia_UIMaster_appbase_div_statustext")};this.turnOn=function(){this.isOff=false};this.turnOff=function(){this.isOff=true};this.showInfo=function(a){if(this.isOff){return}if(this.statusDiv===null){this.init()}this.setStatusShow(true);this.statusDiv.statusText.innerHTML=a};this.setStatusShow=function(a){if(this.isOff){return}if(this.statusDiv===null){this.init()}if(a){this.statusDiv.style.display=""}else{this.statusDiv.statusText.innerHTML="";this.statusDiv.style.display="none";this.statusDiv.style.cursor="pointer"}}};var DATA_FORMAT_SERVICE_URL="/jsp/common/DataFormatService.jsp";function bmiasia_UIMaster_appbase_getDataFormat(b,d,c){var a=new bmiasia_UIMaster_appbase_AjaxClient(WEB_CONTEXTPATH+DATA_FORMAT_SERVICE_URL);a.append("datatype",b);d&&a.append("localeconfig",d);c&&a.append("formatname",c);return a.submitAsString()}function bmiasia_UIMaster_appbase_getDateTimeFormat(b,a){return bmiasia_UIMaster_appbase_getDataFormat("dateTime",b,a)}function bmiasia_UIMaster_appbase_getDateFormat(b,a){return bmiasia_UIMaster_appbase_getDataFormat("date",b,a)}function bmiasia_UIMaster_appbase_getFloatNumberFormat(b,a){return bmiasia_UIMaster_appbase_getDataFormat("floatNumber",b,a)}function bmiasia_UIMaster_appbase_getNumberFormat(b,a){return bmiasia_UIMaster_appbase_getDataFormat("number",b,a)}function bmiasia_UIMaster_appbase_getCurrencyFormat(b,a){return bmiasia_UIMaster_appbase_getDataFormat("currency",b,a)}var elementList=new Array();UIMaster.pageInitFunctions=new Array();function getFormElementList(a){getElementListSingle(document.forms[a]);disableFormDoubleSubmit(a);UIMaster.init()}function getIframeElementList(a){getElementListSingle(a);disableFormDoubleSubmitInternal(a)}function getElementList(){getElementListSingle(document.forms[0]);disableDoubleSubmit();UIMaster.init();if(!IS_MOBILEVIEW){focusFirstTextField()}}function establishWebsocket(c,a,e,d){var b=new WebSocket("ws://localhost:8080/"+WEB_CONTEXTPATH+c);b.onerror=function(f){d(b,f)};b.onopen=function(f){a(b,f)};b.onmessage=function(f){e(b,f)};return b}function focusFirstTextField(){for(var a in elementList){if(elementList[a].type=="text"&&elementList[a].disabled==false&&elementList[a].readOnly==false&&elementList[a].style.display!="none"){try{elementList[a].focus();break}catch(b){}}}}function getElementListSingle(g,a){var d=$(g).find("div[id!=''],input[name!='__resourcebundle'][name!='isLeftToRight'],select,textarea,button,table,iframe,canvas");for(var c=0;c<d.length;c++){var f=d[c],b=elementList[f.name];if(f&&f.type==""){continue}f.id&&f.id.indexOf("div-")<0&&!elementList[f.id]&&(elementList[f.id]=f);if(f.name){if(!b){elementList[f.name]=f}else{if(b.length==undefined||b.type=="select-one"||b.type=="select-multiple"){elementList[f.name]=[b,f]}else{b[b.length]=f}}if(false&&IS_MOBILEVIEW&&a){if(f.tagName.toLowerCase()=="input"){if(f.type.toLowerCase()=="text"){$(f).textinput()}}else{if(f.tagName.toLowerCase()=="textarea"){$(f).textinput()}else{if(f.tagName.toLowerCase()=="button"){$(f).button()}else{if(f.tagName.toLowerCase()=="select"){$(f).selectmenu("refresh")}}}}}}}}function disableDoubleSubmit(){disableFormDoubleSubmitInternal(document.forms[0])}function disableFormDoubleSubmit(a){disableFormDoubleSubmitInternal(document.forms[a])}function disableFormDoubleSubmitInternal(d){function c(e,f){return $('<input type="hidden" />').attr({value:f,name:e})}function a(j,n){var l,g,m,h;for(g=0;g<j.elements.length;g++){if(j.elements[g].parentEntity){l=j.elements[g].parentEntity;break}}while(l.parentEntity){l=l.parentEntity}l.sync();m=$("<form></form>").attr({action:j.action,method:"POST",target:j.target,encoding:j.encoding}).append(c("_pagename",j._pagename.value)).append(c("_outname",j._outname.value)).append(c("_framePrefix",j.getAttribute("_framePrefix"))).append($(b).find("input[type=file]"));if(j._portletId){m.append(c("_portletId",j._portletId.value))}if(n){m.append(c("_frameTarget",n))}var e=$("#_htmlkey");if(e.length>0){m.append(c("_htmlkey",e.attr("value")))}else{h=$("#_sync");if(h.length>0){m.append(c("_sync",h.attr("value")))}else{h=UIMaster.ui.sync();if(h){m.append(c("_sync",h))}}}m.appendTo(j.parentNode);m.submit()}var b=d;b._submit=b.submit;b.submit=function(){if(b.target=="_self"){if(b.enableSubmited!=false){b.enableSubmited=false;a(b)}else{alert(UIMaster_getI18NInfo("Common||AJAX_EXCEPTION_REQUEST_WAIT"))}}else{if(b.target=="_parent"){if(parent.document.enableSubmited!=false){parent.document.enableSubmited=false;var e=window.parent.document.forms[0].getAttribute("_framePrefix")||"";a(b,e)}else{alert(UIMaster_getI18NInfo("Common||AJAX_EXCEPTION_REQUEST_WAIT"))}}else{frame=lookupFrame(b.target,window.top.frames);if(frame!=undefined){if(frame.document.enableSubmited!=false){frame.document.enableSubmited=false;a(b,b.target)}else{alert(UIMaster_getI18NInfo("Common||AJAX_EXCEPTION_REQUEST_WAIT"))}}else{a(b,b.target)}}}}}function attachWindowEvent(){window.onunload==null&&(window.onunload=releaseMem)}function releaseMem(){var b;if(document.forms[0]){b=document.forms[0].elements;for(var a=b.length-1;a>=0;a--){releaseMemSingle(b[a])}b=null}b=document.links;for(var a=b.length-1;a>=0;a--){releaseMemSingle(b[a])}b=null;delete defaultname;defaultname=null;delete elementList;elementList=null;window.onload=null;window.onunload=null}function releaseMem4Frame(frame,frameName){var objs=frame.elements;if(objs){for(var i=objs.length-1;i>=0;i--){releaseMemSingle(objs[i])}}objs=null;for(var i in elementList){if(i.indexOf(frameName)==0){delete elementList[i]}}var frame=eval("defaultname."+frameName);for(var i in frame.parentEntity){if(frame.parentEntity[i].id==frameName){delete frame.parentEntity[i];break}}frame=null}function releaseMemSingle(a){if(a==null){return}if("clearAttributes" in a){a.clearAttributes()}};